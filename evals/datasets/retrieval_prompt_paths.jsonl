{"id":"RET-01","suite":"retrieval_prompt_paths","path_id":"A1+A2","mode":"single_turn","required_invariants":["first_retrieval_tool_local","no_web_before_local"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["read_paper","Skill:knowledge.paper.read","Skill:paper.read"],"required_slots":{"web_tool_calls_before_first_local":0}}],"deterministic_metrics":["tool_trace"],"runtime_llm_judge":"off"}
{"id":"RET-02","suite":"retrieval_prompt_paths","path_id":"A1","mode":"single_turn","required_invariants":["local_citation_contract","no_invalid_citations"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["read_paper","Skill:knowledge.paper.read"],"required_slots":{"minimum_local_citations":1,"invalid_citation_urls":0}}],"deterministic_metrics":["citation_contract"],"runtime_llm_judge":"off"}
{"id":"RET-03","suite":"retrieval_prompt_paths","path_id":"A1","mode":"single_turn","required_invariants":["local_retrieval_present","web_tool_budget_respected"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["read_paper","Skill:knowledge.paper.read","Skill:knowledge.paper.search"],"required_slots":{"web_tool_calls_max":1,"local_retrieval_calls_min":1}}],"deterministic_metrics":["tool_trace"],"runtime_llm_judge":"off"}
{"id":"RET-04","suite":"retrieval_prompt_paths","path_id":"A1","mode":"single_turn","required_invariants":["missing_local_stated","bounded_fallback_calls"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["Skill:knowledge.paper.search","WebSearch","WebFetch"],"required_slots":{"missing_local_statement_required":true,"fallback_tool_calls_max":2}}],"deterministic_metrics":["tool_trace"],"runtime_llm_judge":"off"}
{"id":"RET-05","suite":"retrieval_prompt_paths","path_id":"A1","mode":"single_turn","required_invariants":["no_hidden_tag_leak","no_private_path_leak"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["read_paper","WebSearch","WebFetch"],"required_slots":{"hidden_tag_leakage":0,"absolute_path_leakage":0}}],"deterministic_metrics":["output_hygiene"],"runtime_llm_judge":"off"}
{"id":"RET-06","suite":"retrieval_prompt_paths","path_id":"A4","mode":"multi_step","required_invariants":["summary_fields_persisted","fact_slot_recall_threshold"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["analyze_paper","read_paper","Skill:knowledge.paper.analyze"],"required_slots":{"summary_non_empty_rate":1.0,"planted_fact_slot_recall_min":0.8}}],"deterministic_metrics":["db_state"],"runtime_llm_judge":"off"}
{"id":"RET-07","suite":"retrieval_prompt_paths","path_id":"A5","mode":"single_turn","required_invariants":["critic_score_ordering","ordering_agreement_threshold"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["RagCritic.evaluate_chunk"],"required_slots":{"ordering_agreement_min":0.8}}],"deterministic_metrics":["retriever_contract"],"runtime_llm_judge":"sampled_weekly_audit"}
{"id":"RET-08","suite":"retrieval_prompt_paths","path_id":"A5","mode":"single_turn","required_invariants":["json_parse_success_valid","fallback_contract_success_malformed"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["RagCritic.evaluate_chunk"],"required_slots":{"json_parse_success_rate":1.0,"fallback_contract_success_rate":1.0}}],"deterministic_metrics":["schema_contract"],"runtime_llm_judge":"off"}
{"id":"AGT-01","suite":"retrieval_prompt_paths","path_id":"A1","mode":"single_turn","required_invariants":["no_hidden_private_debug_leak"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["read_paper","WebSearch"],"required_slots":{"hidden_private_debug_leakage":0}}],"deterministic_metrics":["output_hygiene"],"runtime_llm_judge":"off"}
{"id":"AGT-02","suite":"retrieval_prompt_paths","path_id":"A1","mode":"single_turn","required_invariants":["differential_invariant_compliance","no_forbidden_style_regression"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["read_paper","WebSearch","WebFetch"],"required_slots":{"differential_invariant_compliance":1.0,"forbidden_style_regressions":0}}],"deterministic_metrics":["differential_ab"],"runtime_llm_judge":"off"}
{"id":"AGT-03","suite":"retrieval_prompt_paths","path_id":"A3","mode":"single_turn","required_invariants":["single_sentence_summary","prefix_contract"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["preference.sync"],"required_slots":{"mocked_format_pass_rate":1.0,"weekly_live_sample_target":0.8}}],"deterministic_metrics":["schema_contract"],"runtime_llm_judge":"off","weekly_live_audit_candidate":true}
{"id":"AGT-04","suite":"retrieval_prompt_paths","path_id":"A3","mode":"single_turn","required_invariants":["denylist_leakage_zero"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["preference.sync"],"required_slots":{"sensitive_denylist_leakage":0}}],"deterministic_metrics":["output_hygiene"],"runtime_llm_judge":"off"}
{"id":"AGT-05","suite":"retrieval_prompt_paths","path_id":"A4","mode":"single_turn","required_invariants":["strict_schema_validation"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["summarizer.generate_summary"],"required_slots":{"schema_validation_pass_rate":1.0}}],"deterministic_metrics":["schema_contract"],"runtime_llm_judge":"off"}
{"id":"AGT-06","suite":"retrieval_prompt_paths","path_id":"A4","mode":"single_turn","required_invariants":["slot_coverage_threshold","no_contradictions"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["summarizer.generate_summary"],"required_slots":{"slot_coverage_min":0.8,"contradiction_count":0}}],"deterministic_metrics":["db_state"],"runtime_llm_judge":"off"}
{"id":"AGT-07","suite":"retrieval_prompt_paths","path_id":"A6","mode":"single_turn","required_invariants":["embedding_completion_fallback_contract"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["bridge.local_embedding","bridge.anthropic_complete_if_cache"],"required_slots":{"fallback_contract_pass_rate":1.0}}],"deterministic_metrics":["bridge_contract"],"runtime_llm_judge":"off"}
{"id":"AGT-08","suite":"retrieval_prompt_paths","path_id":"A1","mode":"single_turn","required_invariants":["prompt_wiring_signal_present"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["MainAgent.get_system_prompt"],"required_slots":{"signal_direction_pass_rate":1.0}}],"deterministic_metrics":["differential_ab"],"runtime_llm_judge":"off"}
{"id":"AGT-09","suite":"retrieval_prompt_paths","path_id":"A3","mode":"single_turn","required_invariants":["no_duplicate_summary_insertions"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["preference.sync"],"required_slots":{"duplicate_insertions":0}}],"deterministic_metrics":["db_state"],"runtime_llm_judge":"off"}
{"id":"AGT-10","suite":"retrieval_prompt_paths","path_id":"A4","mode":"single_turn","required_invariants":["malformed_output_recovery","no_crash"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["summarizer.generate_summary"],"required_slots":{"recovery_pass_rate":1.0,"crash_count":0}}],"deterministic_metrics":["schema_contract"],"runtime_llm_judge":"off"}
{"id":"AGT-11","suite":"retrieval_prompt_paths","path_id":"A5","mode":"single_turn","required_invariants":["threshold_boundary_filter_accuracy"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["HierarchicalRetriever.retrieve_and_filter"],"required_slots":{"boundary_accuracy":1.0}}],"deterministic_metrics":["retriever_contract"],"runtime_llm_judge":"off"}
{"id":"AGT-12","suite":"retrieval_prompt_paths","path_id":"A5","mode":"single_turn","required_invariants":["pairwise_ranking_accuracy"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["RagCritic.evaluate_chunk"],"required_slots":{"pairwise_accuracy_min":0.9}}],"deterministic_metrics":["retriever_contract"],"runtime_llm_judge":"off","mocked_only":true}
{"id":"AGT-13","suite":"retrieval_prompt_paths","path_id":"A6","mode":"single_turn","required_invariants":["error_envelope_contract","no_uncaught_exception_leakage"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["bridge.anthropic_complete_if_cache"],"required_slots":{"error_envelope_pass_rate":1.0,"uncaught_exception_leakage":0}}],"deterministic_metrics":["bridge_contract"],"runtime_llm_judge":"off"}
{"id":"AGT-14","suite":"retrieval_prompt_paths","path_id":"A6","mode":"single_turn","required_invariants":["valid_mode_contract","invalid_mode_handling_contract"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["graph_rag.query"],"required_slots":{"valid_mode_contract_pass_rate":1.0,"invalid_mode_contract_pass_rate":1.0}}],"deterministic_metrics":["bridge_contract"],"runtime_llm_judge":"off"}
{"id":"AGT-15","suite":"retrieval_prompt_paths","path_id":"backend/content_filter.py","mode":"streaming","required_invariants":["no_nested_unclosed_hidden_tag_leak","no_raw_partial_tag_leak"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["StreamingContentFilter.filter_chunk"],"required_slots":{"hidden_tag_leakage":0,"raw_partial_tag_leakage":0}}],"deterministic_metrics":["content_filter_contract"],"runtime_llm_judge":"off"}
{"id":"AGT-16","suite":"retrieval_prompt_paths","path_id":"backend/app.py","mode":"streaming_multi_request","required_invariants":["no_duplicate_chat_rows","mixed_stream_parse_errors_zero","persisted_response_completeness"],"accepted_outcomes":[{"tool_path_policy":"any_allowed_path","any_allowed_path":["app.chat_endpoint","stream_parser","trace_mapper"],"required_slots":{"duplicate_chat_rows":0,"mixed_stream_parse_errors":0,"persisted_response_completeness_min":0.99}}],"deterministic_metrics":["db_state","orchestration_contract"],"runtime_llm_judge":"off"}
